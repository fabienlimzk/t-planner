(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{308:function(e,t,a){e.exports=a(645)},313:function(e,t,a){},338:function(e,t){},340:function(e,t){},354:function(e,t){},356:function(e,t){},384:function(e,t){},386:function(e,t){},387:function(e,t){},393:function(e,t){},395:function(e,t){},413:function(e,t){},415:function(e,t){},427:function(e,t){},430:function(e,t){},645:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(51),i=a.n(r),c=(a(313),a(7)),o=a(8),s=a(10),u=a(9),m=a(16),d=a(15),p=a(11),h=a.n(p),g=a(647),v=a(648),E=a(298),f=a(655),y=a(649),k=a(650),b="https://sei23-t-planner.herokuapp.com/api",C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={trips:[]},e.fetchTrips=function(){var t=localStorage.getItem("token");h.a.get("".concat(b,"/trips"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({trips:t.data.trips})})).catch((function(e){console.log(e)}))},e.deleteTrip=function(t){var a=t.target.id;h.a.delete("".concat(b,"/trips/").concat(t.target.id)).then((function(){var t=e.state.trips.filter((function(e){return e._id!==a}));e.setState({trips:t})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchTrips()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",null,"Trips"),l.a.createElement(g.a,{fluid:!0},l.a.createElement(v.a,null,this.state.trips.map((function(t){return t.createdBy._id===e.props.currentUser._id?l.a.createElement(E.a,{key:t._id,md:"3"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement("div",null,l.a.createElement("h4",null,t.title)),l.a.createElement("div",null,l.a.createElement(y.a,{variant:"primary"},t.country)),l.a.createElement("div",null,l.a.createElement(y.a,{variant:"info"},t.start_date)," to",l.a.createElement(y.a,{variant:"info"},t.end_date)),l.a.createElement("div",null,t.description),l.a.createElement("div",null,l.a.createElement(m.b,{to:"/trip/".concat(t._id)},"View"),l.a.createElement(k.a,{onClick:e.deleteTrip,variant:"danger",size:"sm",id:t._id,style:{float:"right"}},"Delete"))))):""})))))}}]),a}(n.Component),O=a(13),S=a(651),j=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={firstname:"",lastname:"",username:"",email:"",password:""},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.registerHandler=function(){e.props.register(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Register"),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(v.a,null,"First Name:",l.a.createElement(S.a.Control,{name:"firstname",type:"text",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Last Name:",l.a.createElement(S.a.Control,{name:"lastname",type:"text",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Username:",l.a.createElement(S.a.Control,{name:"username",type:"text",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Email Address:",l.a.createElement(S.a.Control,{name:"email",type:"email",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Password:",l.a.createElement(S.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),l.a.createElement(k.a,{variant:"primary",block:!0,onClick:this.registerHandler},"Register"))))}}]),a}(n.Component),_=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:""},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.loginHandler=function(){e.props.login(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Login"),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(v.a,null,"Email Address:",l.a.createElement(S.a.Control,{name:"email",type:"email",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Password:",l.a.createElement(S.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),l.a.createElement(k.a,{variant:"primary",block:!0,onClick:this.loginHandler}," ","Login"))))}}]),a}(n.Component),A=a(119),H="https://sei23-t-planner.herokuapp.com/api",L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={firstname:"",lastname:"",username:"",email:"",status:!1},e.getUserProfile=function(t){h.a.get("".concat(H,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){return e.setState({firstname:t.data.user.firstname,lastname:t.data.user.lastname,username:t.data.user.username,email:t.data.user.email})})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){var t=localStorage.getItem("token");h.a.put("".concat(H,"/auth/user"),{firstname:e.state.firstname,lastname:e.state.lastname,username:e.state.username,email:e.state.email},{headers:{"x-auth-token":t}}).then((function(a){e.getUserProfile(t),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e.componentDidMount=function(){var t=localStorage.getItem("token");null!=t&&(Object(A.decode)(t)?e.getUserProfile(t):localStorage.removeItem("token"))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.username,r=e.email;return this.state.status?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement("h1",null,"Profile"),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(v.a,null,"First Name:",l.a.createElement(S.a.Control,{name:"firstname",type:"text",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Last Name:",l.a.createElement(S.a.Control,{name:"lastname",type:"text",value:a,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Username:",l.a.createElement(S.a.Control,{name:"username",type:"text",value:n,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Email Address:",l.a.createElement(S.a.Control,{name:"email",type:"email",value:r,onChange:this.changeHandler})),l.a.createElement(k.a,{variant:"primary",block:!0,onClick:this.submitHandler},"Update"))))}}]),a}(n.Component),P=a(652),x=a(653);var w=function(e){var t=e.user,a=e.logout;return l.a.createElement(P.a,{bg:"dark",expand:"lg"},l.a.createElement(P.a.Brand,{href:"/"},l.a.createElement("img",{alt:"",src:"/logo.png",width:"45",height:"35",className:"d-inline-block align-top"}),"T-Planner"),l.a.createElement(P.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(P.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(x.a,{className:"mr-auto"},l.a.createElement(m.b,{className:"nav-link",to:"/"},"Trips"),l.a.createElement(m.b,{className:"nav-link",to:"/trip/add"},"Add Trip"),l.a.createElement(m.b,{className:"nav-link",to:"/packingLists"},"Packing List"),l.a.createElement(m.b,{className:"nav-link",to:"/packingList/add"},"Add Packing List")),l.a.createElement(x.a,null,t?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/user/".concat(t._id),className:"nav-link"},t.firstname," ",t.lastname),l.a.createElement(m.b,{to:"/logout",onClick:a,className:"nav-link"},"Logout")):l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login"),l.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))},T=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={activities:[]},e.deleteActivity=function(t){var a=t.target.id;h.a.delete("".concat("https://sei23-t-planner.herokuapp.com/api","/activities/").concat(a)).then((function(){var t=e.state.activities.filter((function(e){return e._id!==a}));e.setState({activities:t})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({activities:this.props.activities})}},{key:"componentDidUpdate",value:function(e){e.activities!==this.props.activities&&this.setState({activities:this.props.activities})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",null,"Activities"),l.a.createElement(g.a,{fluid:!0},l.a.createElement(v.a,null,this.state.activities.map((function(t){return l.a.createElement(E.a,{key:t._id,md:"3"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement("div",null,l.a.createElement(f.a.Img,{variant:"top",src:t.image_url})),l.a.createElement("div",null,t.title),l.a.createElement("div",null,t.description),l.a.createElement("div",null,l.a.createElement(m.b,{to:"/activity/".concat(t._id)},"View"),l.a.createElement(k.a,{onClick:e.deleteActivity,variant:"danger",id:t._id,size:"sm",style:{float:"right"}},"Delete")))))})))))}}]),a}(n.Component),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",start_date:"",end_date:"",duration:"",address:"",description:"",image_url:""},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.componentDidMount=function(){e.setState(e.props.activity)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.start_date,n=e.end_date,r=e.duration,i=e.address,c=e.description,o=e.image_url;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h4",null,"Edit Activity"),l.a.createElement("div",null,l.a.createElement(v.a,null,"Title",l.a.createElement(S.a.Control,{name:"title",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date",l.a.createElement(S.a.Control,{name:"start_date",value:a.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date",l.a.createElement(S.a.Control,{name:"end_date",value:n.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Duration",l.a.createElement(S.a.Control,{name:"duration",value:r,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Address",l.a.createElement(S.a.Control,{name:"address",value:i,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description",l.a.createElement(S.a.Control,{name:"description",value:c,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Image",l.a.createElement(S.a.Control,{name:"image_url",value:o,onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit"))))}}]),a}(n.Component),D=a(33),M=a(171),N=a.n(M),U=a(55),F=a.n(U);F.a.enableDebug(),F.a.setApiKey("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U");var Q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){F.a.fromLatLng(this.props.activity.place.mapPosition.lat,this.props.activity.place.mapPosition.lng).then((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this,t=Object(D.withScriptjs)(Object(D.withGoogleMap)((function(t){return l.a.createElement(D.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.props.activity.place.mapPosition.lat,lng:e.props.activity.place.mapPosition.lng}},l.a.createElement(D.Marker,{google:e.props.google,name:"Dolores park",draggable:!1,position:{lat:e.props.activity.place.mapPosition.lat,lng:e.props.activity.place.mapPosition.lng}}),l.a.createElement(D.Marker,null))})));return l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U","&libraries=places"),loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:this.props.height}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})})),l.a.createElement("br",null))}}]),a}(l.a.Component),z="https://sei23-t-planner.herokuapp.com/api",B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={activity:null,edit:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editActivity=function(t,a){h.a.put("".concat(z,"/activities/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getActivity()})).catch((function(e){console.log(e)}))},e.fetchActivities=function(){var t=localStorage.getItem("token");h.a.get("".concat(z,"/activities"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({activities:t.data.activities})})).catch((function(e){console.log(e)}))},e.deleteActivity=function(e){},e.getActivity=function(){h.a.get("".concat(z,"/activities/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({activity:t.data.activity})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getActivity()}},{key:"render",value:function(){var e=this.state,t=e.activity,a=e.edit;return l.a.createElement("div",null,l.a.createElement(g.a,null,t?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,t.title)),l.a.createElement("div",null,"Start: ",t.start_date?t.start_date.split("T")[0]:""),l.a.createElement("div",null,"End: ",t.end_date?t.end_date.split("T")[0]:""),l.a.createElement("div",null,"Duration: ",t.duration),l.a.createElement("div",null,"Address: ",t.address),l.a.createElement("div",null,"Description: ",t.description),l.a.createElement("div",null,l.a.createElement("img",{src:t.image_url,alt:""})),l.a.createElement(k.a,{onClick:this.showEdit},"Edit Activity"),a&&l.a.createElement(I,{activity:t,editActivity:this.editActivity}),l.a.createElement(Q,{google:this.props.google,height:"650px",zoom:2,activity:t})):"Loading..."))}}]),a}(n.Component);F.a.enableDebug(),F.a.setApiKey("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U");var G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},n.getArea=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},n.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},n.onChange=function(e){n.setState(Object(O.a)({},e.target.name,e.target.value))},n.onInfoWindowClose=function(e){},n.onPlaceSelected=function(e){var t=e.formatted_address,a=e.address_components,l=n.getCity(a),r=n.getArea(a),i=n.getState(a),c=e.geometry.location.lat(),o=e.geometry.location.lng(),s={address:t,city:l,area:r,state:i,mapPosition:{lat:c,lng:o},markerPosition:{lat:c,lng:o}};n.setState({place:s}),n.props.updatePlace(s)},n.state={place:{city:"",area:"",state:"",address:"",mapPosition:{lat:1.2832,lng:103.8466},markerPosition:{lat:n.props.center.lat,lng:n.props.center.lng}}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;F.a.fromLatLng(this.state.place.markerPosition.lat,this.state.place.markerPosition.lng).then((function(t){t.results[0].formatted_address;var a=t.results[0].address_components;e.getCity(a),e.getArea(a),e.getState(a)}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state!=t||this.props.center.lat!==e.center.lat&&void 0}},{key:"render",value:function(){var e=this,t=Object(D.withScriptjs)(Object(D.withGoogleMap)((function(t){return l.a.createElement(D.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.place.mapPosition.lat,lng:e.state.place.mapPosition.lng}},l.a.createElement(N.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"2px",marginBottom:"100px"},onPlaceSelected:e.onPlaceSelected,types:["(regions)"]}),l.a.createElement(D.Marker,{google:e.props.google,name:"Dolores park",draggable:!1,position:{lat:e.state.place.markerPosition.lat,lng:e.state.place.markerPosition.lng}}),l.a.createElement(D.Marker,null),e.props.activities.map((function(e){return l.a.createElement(D.Marker,{key:e._id,position:{lat:e.place.mapPosition.lat,lng:e.place.mapPosition.lng}})})))})));return void 0!==this.props.center.lat?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U","&libraries=places"),loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:this.props.height}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})})),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:""},"City"),l.a.createElement("input",{type:"text",name:"city",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.city})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"Area"),l.a.createElement("input",{type:"text",name:"area",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.area})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"State"),l.a.createElement("input",{type:"text",name:"state",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.state})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"Address"),l.a.createElement("input",{type:"text",name:"address",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.address}))):l.a.createElement("div",{style:{height:this.props.height}})}}]),a}(l.a.Component),V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",start_date:"",end_date:"",duration:"",place:{city:"",area:"",state:"",address:"",mapPosition:{lat:1.2832,lng:103.8466},description:"",image_url:"",trip_id:e.props.trip_id}},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.updatePlace=function(t){e.setState({place:t,trip_id:e.props.trip_id})},e.submitHandler=function(){h.a.post("".concat("https://sei23-t-planner.herokuapp.com/api","/activities"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.props.addActivity(t.data.savedActivity)})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.start_date,n=e.end_date,r=e.duration,i=e.description,c=e.image_url;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Add Activity"),l.a.createElement(v.a,null,"Title",l.a.createElement(S.a.Control,{name:"title",value:t,placeholder:"e.g. Visit local market",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date",l.a.createElement(S.a.Control,{name:"start_date",value:a,type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date",l.a.createElement(S.a.Control,{name:"end_date",value:n,type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Duration",l.a.createElement(S.a.Control,{name:"duration",value:r,placeholder:"1hr",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description",l.a.createElement(S.a.Control,{name:"description",value:i,placeholder:"Use the backdoor",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Image",l.a.createElement(S.a.Control,{name:"image_url",value:c,placeholder:"url",onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit"),l.a.createElement(G,{google:this.props.google,center:{lat:15.7076,lng:104.1920275},height:"650px",zoom:6.26,updatePlace:this.updatePlace,activities:this.props.activities}))))}}]),a}(n.Component),Y=a(71),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",description:"",country:"",start_date:"",end_date:"",status:!1},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){e.props.editTrip(e.state,e.props.trip._id)},e.componentDidMount=function(){e.setState(e.props.trip)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.country,r=e.start_date,i=e.end_date;return l.a.createElement("div",null,l.a.createElement("h1",null,"Edit Trip"),l.a.createElement("div",null,l.a.createElement(v.a,null,"Title of Trip:",l.a.createElement(S.a.Control,{name:"title",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description:",l.a.createElement(S.a.Control,{name:"description",value:a,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Country:",l.a.createElement(S.a.Control,{name:"country",value:n,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date:",l.a.createElement(S.a.Control,{name:"start_date",value:r.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date:",l.a.createElement(S.a.Control,{name:"end_date",value:i.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),q="https://sei23-t-planner.herokuapp.com/api",X=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={trip:null,trip_id:"",activity:{title:"",start_date:"",end_date:"",duration:"",place:{city:"",area:"",state:"",address:"",mapPosition:{lat:"",lng:""}},description:"",image_url:""},activities:[],edit:!1,add:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.showAdd=function(){e.setState((function(e){return{add:!e.add}}))},e.editTrip=function(t,a){h.a.put("".concat(q,"/trips/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getTrip()})).catch((function(e){console.log(e)}))},e.fetchTrips=function(){var t=localStorage.getTrip("token");h.a.get("".concat(q,"/trips"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({trips:t.data.trips})})).catch((function(e){console.log(e)}))},e.getTrip=function(){h.a.get("".concat(q,"/trips/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({trip:t.data.trip,activities:t.data.trip.activities,trip_id:t.data.trip._id})})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){h.a.post("".concat(q,"/activities"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(e){})).catch((function(e){console.log(e)}))},e.addActivity=function(t){e.setState({activities:[].concat(Object(Y.a)(e.state.activities),[t])})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getTrip()}},{key:"render",value:function(){var e=this.state,t=e.trip,a=e.edit,n=e.add,r=e.activities;return l.a.createElement("div",null,l.a.createElement(g.a,null,t?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,t.title)),l.a.createElement("div",null,"Description: ",t.description),l.a.createElement("div",null,"Country: ",t.country),l.a.createElement("div",null,"Start Date: ",t.start_date),l.a.createElement("div",null,"End Date: ",t.end_date),l.a.createElement("div",null,"Created By: ",t.createdBy.username)),l.a.createElement(k.a,{onClick:this.showEdit},"Edit Trip"),l.a.createElement("br",null),a&&l.a.createElement(R,{trip:t,editTrip:this.editTrip}),l.a.createElement("br",null),l.a.createElement(T,{activities:r}),l.a.createElement("br",null),l.a.createElement(k.a,{onClick:this.showAdd},"Add More Activity"),l.a.createElement("br",null),n&&l.a.createElement(V,{addActivity:this.addActivity,activities:this.state.activities,activity:this.state.trip.activities,trip_id:this.state.trip_id})):"Loading..."))}}]),a}(n.Component),W="https://sei23-t-planner.herokuapp.com/api",J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",description:"",country:"",start_date:"",end_date:"",status:!1},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){h.a.post("".concat(W,"/trips"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({status:!0})})).catch((function(e){console.log(e.response.data)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.country,r=e.start_date,i=e.end_date;return this.state.status?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Add Trip"),l.a.createElement("div",null,l.a.createElement(v.a,null,"Title of Trip:",l.a.createElement(S.a.Control,{name:"title",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description:",l.a.createElement(S.a.Control,{name:"description",value:a,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Country:",l.a.createElement(S.a.Control,{name:"country",value:n,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date:",l.a.createElement(S.a.Control,{name:"start_date",value:r,type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date:",l.a.createElement(S.a.Control,{name:"end_date",value:i,type:"date",onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit"))))}}]),a}(n.Component),K="https://sei23-t-planner.herokuapp.com/api",Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={packingLists:[]},e.fetchPackingLists=function(){var t=localStorage.getItem("token");h.a.get("".concat(K,"/packingLists"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({packingLists:t.data.packingLists})})).catch((function(e){console.log(e)}))},e.deletePackingList=function(t){h.a.delete("".concat(K,"/packingLists/").concat(t.target.id)).then((function(t){e.fetchPackingLists()}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchPackingLists()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",null,"Packing List"),l.a.createElement(g.a,{fluid:!0},l.a.createElement(v.a,null,this.state.packingLists.map((function(t,a){return l.a.createElement(E.a,{key:t._id,md:"3"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement("div",null,t.title,l.a.createElement("br",null)),l.a.createElement("div",null,l.a.createElement(m.b,{to:"/packingList/".concat(t._id)},"View"),l.a.createElement(k.a,{onClick:e.deletePackingList,variant:"danger",id:t._id,size:"sm",style:{float:"right"}},"Delete")))))})))))}}]),a}(n.Component),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",items:[]},e.titleChangeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.itemChangeHandler=function(t,a){e.state.items[a]=t.target.value,e.setState({items:e.state.items})},e.removeHandler=function(t){e.state.items.splice(t,1),console.log(e.state.items,"----"),e.setState({items:e.state.items})},e.submitHandler=function(){e.props.editPackingList(e.state,e.props.packingList._id)},e.addItem=function(){e.setState({items:[].concat(Object(Y.a)(e.state.items),[""])})},e.componentDidMount=function(){e.setState(e.props.packingList)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.items;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Edit Item"),l.a.createElement(v.a,null,"Title:",l.a.createElement(S.a.Control,{name:"title",value:a,placeholder:"Summer",onChange:this.titleChangeHandler})),l.a.createElement("div",null,"Items:",n.map((function(t,a){return l.a.createElement(v.a,{key:a},l.a.createElement(S.a.Control,{name:"items",value:t,placeholder:"FlipFlops",onChange:function(t){return e.itemChangeHandler(t,a)}}),l.a.createElement(k.a,{variant:"danger",onClick:function(){return e.removeHandler(a)}},"Remove"))}))),l.a.createElement(k.a,{onClick:function(t){return e.addItem(t)}},"Add more item"),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),ee=a(656),te="https://sei23-t-planner.herokuapp.com/api",ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={packingList:null,edit:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editPackingList=function(t,a){h.a.put("".concat(te,"/packingLists/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getPackingList()})).catch((function(e){console.log(e)}))},e.fetchPackingLists=function(){var t=localStorage.getItem("token");h.a.get("".concat(te,"/packingLists"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({packingLists:t.data.packingLists})})).catch((function(e){console.log(e)}))},e.deletePackingList=function(e){},e.getPackingList=function(){h.a.get("".concat(te,"/packingLists/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({packingList:t.data.packingList})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getPackingList()}},{key:"render",value:function(){var e=this.state,t=e.packingList,a=e.edit;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Packing List"),t?l.a.createElement("div",null,l.a.createElement("h3",null,"For: ",t.title),t.items.map((function(e,t){return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("h3",null,"Items to pack: "),l.a.createElement(ee.a,null,l.a.createElement(ee.a.Item,{as:"li",key:t},e)))})),l.a.createElement(k.a,{onClick:this.showEdit},"Edit Packing List"),a&&l.a.createElement($,{packingList:t,editPackingList:this.editPackingList})):"Loading..."))}}]),a}(n.Component),ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",items:[],status:!1},e.titleChangeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.itemChangeHandler=function(t,a){e.state.items[a]=t.target.value,e.setState({items:e.state.items})},e.removeHandler=function(t){e.state.items.splice(t,1),e.setState({items:e.state.items})},e.submitHandler=function(t){h.a.post("".concat("https://sei23-t-planner.herokuapp.com/api","/packingLists"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({status:!0})})).catch((function(e){console.log(e)}))},e.addItem=function(){e.setState({items:[].concat(Object(Y.a)(e.state.items),[""])})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.items;return this.state.status?l.a.createElement(d.a,{to:"/packingLists"}):l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Add Item"),l.a.createElement(v.a,null,"Title:",l.a.createElement(S.a.Control,{name:"title",value:a,placeholder:"Summer",onChange:this.titleChangeHandler})),l.a.createElement("div",null,"Items:",n.map((function(t,a){return l.a.createElement(v.a,{key:a},l.a.createElement(S.a.Control,{name:"items",value:t,placeholder:"FlipFlops",onChange:function(t){return e.itemChangeHandler(t,a)}}),l.a.createElement(k.a,{variant:"danger",onClick:function(){return e.removeHandler(a)}},"Remove"))}))),l.a.createElement(k.a,{onClick:function(t){return e.addItem(t)}},"Add more item"),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),le=a(307);var re=function(e){var t=e.component,a=e.isAuth,n=Object(le.a)(e,["component","isAuth"]);return l.a.createElement(d.b,Object.assign({},n,{render:function(e){return a?l.a.createElement(t,Object.assign({},e,n)):l.a.createElement(d.a,{to:"/login"})}}))},ie=a(654),ce="https://sei23-t-planner.herokuapp.com/api",oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={trips:[],errorMessage:null,isAuth:!1,user:null},e.getUserProfile=function(t){h.a.get("".concat(ce,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({isAuth:!0,user:t.data.user})})).catch((function(e){}))},e.loginHandler=function(t){h.a.post("".concat(ce,"/auth/login"),t).then((function(t){console.log("User logged in"),localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token),e.setState({isAuth:!0})})).catch((function(t){console.log(t),e.setState({isAuth:!1,errorMessage:t.response.data.message})}))},e.registerHandler=function(t){h.a.post("".concat(ce,"/auth/register"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1})}))},e.logoutHandler=function(t){t.preventDefault(),console.log("User logged out"),e.setState({items:[],errorMessage:null,isAuth:!1,user:null}),localStorage.removeItem("token")},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!=e&&(Object(A.decode)(e)?this.getUserProfile(e):localStorage.removeItem("token"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAuth,n=t.user,r=t.errorMessage;return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,null,l.a.createElement(w,{user:n,logout:this.logoutHandler}),r&&l.a.createElement(ie.a,null,r),l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/register",exact:!0,render:function(){return a?l.a.createElement(d.a,{to:"/"}):l.a.createElement(j,{register:e.registerHandler})}}),l.a.createElement(d.b,{path:"/login",exact:!0,render:function(){return a?l.a.createElement(d.a,{to:"/"}):l.a.createElement(_,{login:e.loginHandler})}}),l.a.createElement(re,{exact:!0,path:"/user/:id",isAuth:a,component:L,currentUser:n}),l.a.createElement(re,{exact:!0,path:"/",isAuth:a,component:C,currentUser:n}),l.a.createElement(re,{exact:!0,path:"/trip/add",isAuth:a,component:J}),l.a.createElement(re,{exact:!0,path:"/trip/:id",isAuth:a,component:X}),l.a.createElement(re,{exact:!0,path:"/activities",isAuth:a,component:T}),l.a.createElement(re,{exact:!0,path:"/activity/add",isAuth:a,component:V}),l.a.createElement(re,{exact:!0,path:"/activity/:id",isAuth:a,component:B}),l.a.createElement(re,{exact:!0,path:"/packingLists",isAuth:a,component:Z}),l.a.createElement(re,{exact:!0,path:"/packingList/add",isAuth:a,component:ne}),l.a.createElement(re,{exact:!0,path:"/packingList/:id",isAuth:a,component:ae}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(644);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[308,1,2]]]);
//# sourceMappingURL=main.838be959.chunk.js.map