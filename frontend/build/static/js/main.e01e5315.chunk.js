(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{312:function(e,t,a){e.exports=a(648)},317:function(e,t,a){},538:function(e,t){},540:function(e,t){},554:function(e,t){},556:function(e,t){},584:function(e,t){},586:function(e,t){},587:function(e,t){},593:function(e,t){},595:function(e,t){},613:function(e,t){},615:function(e,t){},627:function(e,t){},630:function(e,t){},648:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),i=a.n(l),o=(a(317),a(7)),c=a(8),s=a(10),u=a(9),m=a(14),d=a(16),h=a(12),g=a.n(h),p=a(650),v=a(651),E=a(304),f=a(658),y=a(652),b=a(653),k=a(13),C=a(34),j=a(172),O=a.n(j),S=a(54),A=a.n(S);A.a.enableDebug(),A.a.setApiKey("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U");var _=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},n.getArea=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},n.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},n.onChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.onInfoWindowClose=function(e){},n.onPlaceSelected=function(e){var t=e.formatted_address,a=e.address_components,r=n.getCity(a),l=n.getArea(a),i=n.getState(a),o=e.geometry.location.lat(),c=e.geometry.location.lng(),s={address:t,city:r,area:l,state:i,mapPosition:{lat:o,lng:c},markerPosition:{lat:o,lng:c}};n.setState({place:s}),n.props.updatePlace(s)},n.state={place:{city:"",area:"",state:"",address:"",mapPosition:{lat:1.2832,lng:103.8466},markerPosition:{lat:n.props.center.lat,lng:n.props.center.lng}}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;A.a.fromLatLng(this.state.place.markerPosition.lat,this.state.place.markerPosition.lng).then((function(t){t.results[0].formatted_address;var a=t.results[0].address_components;e.getCity(a),e.getArea(a),e.getState(a)}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state!=t||this.props.center.lat!==e.center.lat&&void 0}},{key:"render",value:function(){var e=this;console.log("lat",this.state.place.mapPosition.lat),console.log("lng",this.state.place.mapPosition.lng);var t=Object(C.withScriptjs)(Object(C.withGoogleMap)((function(t){return r.a.createElement(C.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.place.mapPosition.lat,lng:e.state.place.mapPosition.lng}},r.a.createElement(O.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"2px",marginBottom:"100px"},onPlaceSelected:e.onPlaceSelected,types:["(regions)"]}),r.a.createElement(C.Marker,{google:e.props.google,name:"Dolores park",draggable:!1,position:{lat:e.state.place.markerPosition.lat,lng:e.state.place.markerPosition.lng}}),r.a.createElement(C.Marker,null),e.props.activities.map((function(e){return r.a.createElement(C.Marker,{key:e._id,position:{lat:e.place.mapPosition.lat,lng:e.place.mapPosition.lng}})})))})));return void 0!==this.props.center.lat?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U","&libraries=places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:this.props.height}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:""},"City"),r.a.createElement("input",{type:"text",name:"city",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.city})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Area"),r.a.createElement("input",{type:"text",name:"area",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.area})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"State"),r.a.createElement("input",{type:"text",name:"state",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.state})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Address"),r.a.createElement("input",{type:"text",name:"address",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.address}))):r.a.createElement("div",{style:{height:this.props.height}})}}]),a}(r.a.Component),H=a(302),P=function(e){var t=e.text;return r.a.createElement("div",null,t)},L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"70vh",width:"90%"}},r.a.createElement(H.a,{bootstrapURLKeys:{key:"AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U"},defaultCenter:this.props.center,defaultZoom:this.props.zoom},r.a.createElement(P,{lat:59.955413,lng:30.337844,text:"My Marker"})))}}]),a}(n.Component);L.defaultProps={center:{lat:3.7923,lng:113.4547},zoom:7.4};var w="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={trips:[]},e.fetchTrips=function(){var t=localStorage.getItem("token");g.a.get("".concat(w,"/trips"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({trips:t.data.trips})})).catch((function(e){console.log(e)}))},e.deleteTrip=function(t){var a=t.target.id;g.a.delete("".concat(w,"/trips/").concat(t.target.id)).then((function(){var t=e.state.trips.filter((function(e){return e._id!==a}));e.setState({trips:t})})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchTrips()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Trips"),r.a.createElement(p.a,{fluid:!0},r.a.createElement(v.a,null,this.state.trips.map((function(t){return t.createdBy._id===e.props.currentUser._id?r.a.createElement(E.a,{key:t._id,md:"3"},r.a.createElement(f.a,null,r.a.createElement(f.a.Body,null,r.a.createElement("div",null,r.a.createElement("h4",null,t.title)),r.a.createElement("div",null,r.a.createElement(y.a,{variant:"primary"},t.country)),r.a.createElement("div",null,r.a.createElement(y.a,{variant:"info"},t.start_date)," to",r.a.createElement(y.a,{variant:"info"},t.end_date)),r.a.createElement("div",null,t.description),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/trip/".concat(t._id)},"View"),r.a.createElement(b.a,{onClick:e.deleteTrip,variant:"danger",size:"sm",id:t._id,style:{float:"right"}},"Delete"))))):""}))),r.a.createElement("h4",null,"Places pinned")))}}]),a}(n.Component),M=a(654),T=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={firstname:"",lastname:"",username:"",email:"",password:""},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.registerHandler=function(){e.props.register(e.state)},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,"First Name:",r.a.createElement(M.a.Control,{name:"firstname",type:"text",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Last Name:",r.a.createElement(M.a.Control,{name:"lastname",type:"text",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Username:",r.a.createElement(M.a.Control,{name:"username",type:"text",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Email Address:",r.a.createElement(M.a.Control,{name:"email",type:"email",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Password:",r.a.createElement(M.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),r.a.createElement(b.a,{variant:"primary",block:!0,onClick:this.registerHandler},"Register"))))}}]),a}(n.Component),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.loginHandler=function(){e.props.login(e.state)},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,"Email Address:",r.a.createElement(M.a.Control,{name:"email",type:"email",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Password:",r.a.createElement(M.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),r.a.createElement(b.a,{variant:"primary",block:!0,onClick:this.loginHandler}," ","Login"))))}}]),a}(n.Component),D=a(120),z="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={firstname:"",lastname:"",username:"",email:"",status:!1},e.getUserProfile=function(t){g.a.get("".concat(z,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){return e.setState({firstname:t.data.user.firstname,lastname:t.data.user.lastname,username:t.data.user.username,email:t.data.user.email})})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.submitHandler=function(){var t=localStorage.getItem("token");g.a.put("".concat(z,"/auth/user"),{firstname:e.state.firstname,lastname:e.state.lastname,username:e.state.username,email:e.state.email},{headers:{"x-auth-token":t}}).then((function(a){console.log("done"),e.getUserProfile(t),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e.componentDidMount=function(){var t=localStorage.getItem("token");null!=t&&(Object(D.decode)(t)?e.getUserProfile(t):localStorage.removeItem("token"))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.username,l=e.email;return console.log(this.state),this.state.status?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Profile"),r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,"First Name:",r.a.createElement(M.a.Control,{name:"firstname",type:"text",value:t,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Last Name:",r.a.createElement(M.a.Control,{name:"lastname",type:"text",value:a,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Username:",r.a.createElement(M.a.Control,{name:"username",type:"text",value:n,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Email Address:",r.a.createElement(M.a.Control,{name:"email",type:"email",value:l,onChange:this.changeHandler})),r.a.createElement(b.a,{variant:"primary",block:!0,onClick:this.submitHandler},"Update"))))}}]),a}(n.Component),U=a(655),Q=a(656);var W=function(e){var t=e.user,a=e.logout;return r.a.createElement(U.a,{bg:"dark",expand:"lg"},r.a.createElement(U.a.Brand,{href:"/"},r.a.createElement("img",{alt:"",src:"/logo.png",width:"45",height:"35",className:"d-inline-block align-top"}),"T-Planner"),r.a.createElement(U.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(U.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Q.a,{className:"mr-auto"},r.a.createElement(m.b,{className:"nav-link",to:"/"},"Trips"),r.a.createElement(m.b,{className:"nav-link",to:"/trip/add"},"Add Trip"),r.a.createElement(m.b,{className:"nav-link",to:"/packingLists"},"Packing List"),r.a.createElement(m.b,{className:"nav-link",to:"/packingList/add"},"Add Packing List")),r.a.createElement(Q.a,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/user/".concat(t._id),className:"nav-link"},t.firstname," ",t.lastname),r.a.createElement(m.b,{to:"/logout",onClick:a,className:"nav-link"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login"),r.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))},F="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={activities:[]},e.deleteActivity=function(t){var a=t.target.id;g.a.delete("".concat(F,"/activities/").concat(a)).then((function(){var t=e.state.activities.filter((function(e){return e._id!==a}));e.setState({activities:t})})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({activities:this.props.activities})}},{key:"componentDidUpdate",value:function(e){e.activities!==this.props.activities&&this.setState({activities:this.props.activities})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Activities"),r.a.createElement(p.a,{fluid:!0},r.a.createElement(v.a,null,this.state.activities.map((function(t){return r.a.createElement(E.a,{key:t._id,md:"3"},r.a.createElement(f.a,null,r.a.createElement(f.a.Body,null,r.a.createElement("div",null,r.a.createElement(f.a.Img,{variant:"top",src:t.image_url})),r.a.createElement("div",null,t.title),r.a.createElement("div",null,t.description),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/activity/".concat(t._id)},"View"),r.a.createElement(b.a,{onClick:e.deleteActivity,variant:"danger",id:t._id,size:"sm",style:{float:"right"}},"Delete")))))})))))}}]),a}(n.Component),Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",start_date:"",end_date:"",duration:"",address:"",description:"",image_url:""},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.componentDidMount=function(){e.setState(e.props.activity)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.start_date,n=e.end_date,l=e.duration,i=e.address,o=e.description,c=e.image_url;return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("h4",null,"Edit Activity"),r.a.createElement("div",null,r.a.createElement(v.a,null,"Title",r.a.createElement(M.a.Control,{name:"title",value:t,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Start date",r.a.createElement(M.a.Control,{name:"start_date",value:a.split("T")[0],type:"date",onChange:this.changeHandler})),r.a.createElement(v.a,null,"End date",r.a.createElement(M.a.Control,{name:"end_date",value:n.split("T")[0],type:"date",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Duration",r.a.createElement(M.a.Control,{name:"duration",value:l,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Address",r.a.createElement(M.a.Control,{name:"address",value:i,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Description",r.a.createElement(M.a.Control,{name:"description",value:o,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Image",r.a.createElement(M.a.Control,{name:"image_url",value:c,onChange:this.changeHandler})),r.a.createElement(b.a,{onClick:this.submitHandler},"Submit"))))}}]),a}(n.Component);A.a.enableDebug(),A.a.setApiKey("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U");var G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),A.a.fromLatLng(this.props.activity.place.mapPosition.lat,this.props.activity.place.mapPosition.lng).then((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this,t=Object(C.withScriptjs)(Object(C.withGoogleMap)((function(t){return r.a.createElement(C.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.props.activity.place.mapPosition.lat,lng:e.props.activity.place.mapPosition.lng}},r.a.createElement(C.Marker,{google:e.props.google,name:"Dolores park",draggable:!1,position:{lat:e.props.activity.place.mapPosition.lat,lng:e.props.activity.place.mapPosition.lng}}),r.a.createElement(C.Marker,null))})));return r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U","&libraries=places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:this.props.height}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})),r.a.createElement("br",null))}}]),a}(r.a.Component),V="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={activity:null,edit:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editActivity=function(t,a){g.a.put("".concat(V,"/activities/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getActivity()})).catch((function(e){console.log(e)}))},e.fetchActivities=function(){var t=localStorage.getItem("token");g.a.get("".concat(V,"/activities"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({activities:t.data.activities})})).catch((function(e){console.log(e)}))},e.deleteActivity=function(t){console.log(e.props)},e.getActivity=function(){g.a.get("".concat(V,"/activities/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({activity:t.data.activity})})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getActivity()}},{key:"render",value:function(){var e=this.state,t=e.activity,a=e.edit;return r.a.createElement("div",null,r.a.createElement(p.a,null,t?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,t.title)),r.a.createElement("div",null,"Start: ",t.start_date?t.start_date.split("T")[0]:""),r.a.createElement("div",null,"End: ",t.end_date?t.end_date.split("T")[0]:""),r.a.createElement("div",null,"Duration: ",t.duration),r.a.createElement("div",null,"Address: ",t.address),r.a.createElement("div",null,"Description: ",t.description),r.a.createElement("div",null,r.a.createElement("img",{src:t.image_url,alt:""})),r.a.createElement(b.a,{onClick:this.showEdit},"Edit Activity"),a&&r.a.createElement(Y,{activity:t,editActivity:this.editActivity}),r.a.createElement(G,{google:this.props.google,height:"650px",zoom:2,activity:t})):"Loading..."))}}]),a}(n.Component),q="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",X=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",start_date:"",end_date:"",duration:"",place:{city:"",area:"",state:"",address:"",mapPosition:{lat:1.2832,lng:103.8466},description:"",image_url:"",trip_id:e.props.trip_id}},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.updatePlace=function(t){e.setState({place:t,trip_id:e.props.trip_id})},e.submitHandler=function(){g.a.post("".concat(q,"/activities"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.props.addActivity(t.data.savedActivity)})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.start_date,n=e.end_date,l=e.duration,i=e.description,o=e.image_url;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("h1",null,"Add Activity"),r.a.createElement(v.a,null,"Title",r.a.createElement(M.a.Control,{name:"title",value:t,placeholder:"e.g. Visit local market",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Start date",r.a.createElement(M.a.Control,{name:"start_date",value:a,type:"date",onChange:this.changeHandler})),r.a.createElement(v.a,null,"End date",r.a.createElement(M.a.Control,{name:"end_date",value:n,type:"date",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Duration",r.a.createElement(M.a.Control,{name:"duration",value:l,placeholder:"1hr",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Description",r.a.createElement(M.a.Control,{name:"description",value:i,placeholder:"Use the backdoor",onChange:this.changeHandler})),r.a.createElement(v.a,null,"Image",r.a.createElement(M.a.Control,{name:"image_url",value:o,placeholder:"url",onChange:this.changeHandler})),r.a.createElement(b.a,{onClick:this.submitHandler},"Submit"),r.a.createElement(_,{google:this.props.google,center:{lat:15.7076,lng:104.1920275},height:"650px",zoom:6.26,updatePlace:this.updatePlace,activities:this.props.activities}))))}}]),a}(n.Component),J=a(72),K=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",country:"",start_date:"",end_date:"",status:!1},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.submitHandler=function(){e.props.editTrip(e.state,e.props.trip._id)},e.componentDidMount=function(){e.setState(e.props.trip)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.country,l=e.start_date,i=e.end_date;return r.a.createElement("div",null,r.a.createElement("h1",null,"Edit Trip"),r.a.createElement("div",null,r.a.createElement(v.a,null,"Title of Trip:",r.a.createElement(M.a.Control,{name:"title",value:t,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Description:",r.a.createElement(M.a.Control,{name:"description",value:a,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Country:",r.a.createElement(M.a.Control,{name:"country",value:n,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Start date:",r.a.createElement(M.a.Control,{name:"start_date",value:l.split("T")[0],type:"date",onChange:this.changeHandler})),r.a.createElement(v.a,null,"End date:",r.a.createElement(M.a.Control,{name:"end_date",value:i.split("T")[0],type:"date",onChange:this.changeHandler})),r.a.createElement(b.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),Z="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={trip:null,trip_id:"",activity:{title:"",start_date:"",end_date:"",duration:"",place:{city:"",area:"",state:"",address:"",mapPosition:{lat:"",lng:""}},description:"",image_url:""},activities:[],edit:!1,add:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.showAdd=function(){e.setState((function(e){return{add:!e.add}}))},e.editTrip=function(t,a){g.a.put("".concat(Z,"/trips/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getTrip()})).catch((function(e){console.log(e)}))},e.fetchTrips=function(){var t=localStorage.getTrip("token");g.a.get("".concat(Z,"/trips"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({trips:t.data.trips})})).catch((function(e){console.log(e)}))},e.getTrip=function(){g.a.get("".concat(Z,"/trips/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log(t.data),e.setState({trip:t.data.trip,activities:t.data.trip.activities,trip_id:t.data.trip._id})})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.submitHandler=function(){console.log(e.state),g.a.post("".concat(Z,"/activities"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(e){console.log("done")})).catch((function(e){console.log(e)}))},e.addActivity=function(t){e.setState({activities:[].concat(Object(J.a)(e.state.activities),[t])}),console.log("activities added to trip.state.activities "+JSON.stringify(t))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getTrip()}},{key:"render",value:function(){var e=this.state,t=e.trip,a=e.edit,n=e.add,l=e.activities;return r.a.createElement("div",null,r.a.createElement(p.a,null,t?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,t.title)),r.a.createElement("div",null,"Description: ",t.description),r.a.createElement("div",null,"Country: ",t.country),r.a.createElement("div",null,"Start Date: ",t.start_date),r.a.createElement("div",null,"End Date: ",t.end_date),r.a.createElement("div",null,"Created By: ",t.createdBy.username)),r.a.createElement(b.a,{onClick:this.showEdit},"Edit Trip"),r.a.createElement("br",null),a&&r.a.createElement(K,{trip:t,editTrip:this.editTrip}),r.a.createElement("br",null),r.a.createElement(B,{activities:l}),r.a.createElement("br",null),r.a.createElement(b.a,{onClick:this.showAdd},"Add More Activity"),r.a.createElement("br",null),n&&r.a.createElement(X,{addActivity:this.addActivity,activities:this.state.activities,activity:this.state.trip.activities,trip_id:this.state.trip_id})):"Loading..."))}}]),a}(n.Component),ee="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",description:"",country:"",start_date:"",end_date:"",status:!1},e.changeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.submitHandler=function(){g.a.post("".concat(ee,"/trips"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.setState({status:!0})})).catch((function(e){console.log(e.response.data)}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.country,l=e.start_date,i=e.end_date;return this.state.status?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("h1",null,"Add Trip"),r.a.createElement("div",null,r.a.createElement(v.a,null,"Title of Trip:",r.a.createElement(M.a.Control,{name:"title",value:t,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Description:",r.a.createElement(M.a.Control,{name:"description",value:a,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Country:",r.a.createElement(M.a.Control,{name:"country",value:n,onChange:this.changeHandler})),r.a.createElement(v.a,null,"Start date:",r.a.createElement(M.a.Control,{name:"start_date",value:l,type:"date",onChange:this.changeHandler})),r.a.createElement(v.a,null,"End date:",r.a.createElement(M.a.Control,{name:"end_date",value:i,type:"date",onChange:this.changeHandler})),r.a.createElement(b.a,{onClick:this.submitHandler},"Submit"))))}}]),a}(n.Component),ae="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={packingLists:[]},e.fetchPackingLists=function(){var t=localStorage.getItem("token");g.a.get("".concat(ae,"/packingLists"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({packingLists:t.data.packingLists})})).catch((function(e){console.log(e)}))},e.deletePackingList=function(t){g.a.delete("".concat(ae,"/packingLists/").concat(t.target.id)).then((function(t){e.fetchPackingLists()}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchPackingLists()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Packing List"),r.a.createElement(p.a,{fluid:!0},r.a.createElement(v.a,null,this.state.packingLists.map((function(t,a){return r.a.createElement(E.a,{key:t._id,md:"3"},r.a.createElement(f.a,null,r.a.createElement(f.a.Body,null,r.a.createElement("div",null,t.title,r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/packingList/".concat(t._id)},"View"),r.a.createElement(b.a,{onClick:e.deletePackingList,variant:"danger",id:t._id,size:"sm",style:{float:"right"}},"Delete")))))})))))}}]),a}(n.Component),re=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",items:[]},e.titleChangeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.itemChangeHandler=function(t,a){e.state.items[a]=t.target.value,e.setState({items:e.state.items})},e.removeHandler=function(t){e.state.items.splice(t,1),console.log(e.state.items,"----"),e.setState({items:e.state.items})},e.submitHandler=function(){e.props.editPackingList(e.state,e.props.packingList._id)},e.addItem=function(){e.setState({items:[].concat(Object(J.a)(e.state.items),[""])})},e.componentDidMount=function(){e.setState(e.props.packingList)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.items;return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("h1",null,"Edit Item"),r.a.createElement(v.a,null,"Title:",r.a.createElement(M.a.Control,{name:"title",value:a,placeholder:"Summer",onChange:this.titleChangeHandler})),r.a.createElement("div",null,"Items:",n.map((function(t,a){return r.a.createElement(v.a,{key:a},r.a.createElement(M.a.Control,{name:"items",value:t,placeholder:"FlipFlops",onChange:function(t){return e.itemChangeHandler(t,a)}}),r.a.createElement(b.a,{variant:"danger",onClick:function(){return e.removeHandler(a)}},"Remove"))}))),r.a.createElement(b.a,{onClick:function(t){return e.addItem(t)}},"Add more item"),r.a.createElement(b.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),le=a(659),ie="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={packingList:null,edit:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editPackingList=function(t,a){g.a.put("".concat(ie,"/packingLists/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getPackingList()})).catch((function(e){console.log(e)}))},e.fetchPackingLists=function(){var t=localStorage.getItem("token");g.a.get("".concat(ie,"/packingLists"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({packingLists:t.data.packingLists})})).catch((function(e){console.log(e)}))},e.deletePackingList=function(e){},e.getPackingList=function(){g.a.get("".concat(ie,"/packingLists/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({packingList:t.data.packingList})})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getPackingList()}},{key:"render",value:function(){var e=this.state,t=e.packingList,a=e.edit;return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("h1",null,"Packing List"),t?r.a.createElement("div",null,r.a.createElement("h3",null,t.title),t.items.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(le.a,null,r.a.createElement(le.a.Item,{as:"li",key:t},e)))})),r.a.createElement(b.a,{onClick:this.showEdit},"Edit Packing List"),a&&r.a.createElement(re,{packingList:t,editPackingList:this.editPackingList})):"Loading..."))}}]),a}(n.Component),ce="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",se=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",items:[],status:!1},e.titleChangeHandler=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.itemChangeHandler=function(t,a){e.state.items[a]=t.target.value,e.setState({items:e.state.items})},e.removeHandler=function(t){e.state.items.splice(t,1),console.log(e.state.items,"----"),e.setState({items:e.state.items})},e.submitHandler=function(t){g.a.post("".concat(ce,"/packingLists"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e.addItem=function(){e.setState({items:[].concat(Object(J.a)(e.state.items),[""])})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.items;return this.state.status?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("h1",null,"Add Item"),r.a.createElement(v.a,null,"Title:",r.a.createElement(M.a.Control,{name:"title",value:a,placeholder:"Summer",onChange:this.titleChangeHandler})),r.a.createElement("div",null,"Items:",n.map((function(t,a){return r.a.createElement(v.a,{key:a},r.a.createElement(M.a.Control,{name:"items",value:t,placeholder:"FlipFlops",onChange:function(t){return e.itemChangeHandler(t,a)}}),r.a.createElement(b.a,{variant:"danger",onClick:function(){return e.removeHandler(a)}},"Remove"))}))),r.a.createElement(b.a,{onClick:function(t){return e.addItem(t)}},"Add more item"),r.a.createElement(b.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),ue=a(311);var me=function(e){var t=e.component,a=e.isAuth,n=Object(ue.a)(e,["component","isAuth"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(d.a,{to:"/login"})}}))},de=a(657),he="mongodb+srv://fabienlimzk:AP6ns958SP8yM5aj@cluster0.mmm09.mongodb.net/tplanner?retryWrites=true&w=majority",ge=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={trips:[],errorMessage:null,isAuth:!1,user:null},e.getUserProfile=function(t){g.a.get("".concat(he,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({isAuth:!0,user:t.data.user})})).catch((function(e){}))},e.loginHandler=function(t){g.a.post("".concat(he,"/auth/login"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token),e.setState({isAuth:!0})})).catch((function(t){console.log(t),e.setState({isAuth:!1,errorMessage:t.response.data.message})}))},e.registerHandler=function(t){g.a.post("".concat(he,"/auth/register"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1})}))},e.logoutHandler=function(t){t.preventDefault(),console.log("User logged out"),e.setState({items:[],errorMessage:null,isAuth:!1,user:null}),localStorage.removeItem("token")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!=e&&(Object(D.decode)(e)?this.getUserProfile(e):localStorage.removeItem("token"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAuth,n=t.user,l=t.errorMessage;return console.log("this belongs to the user logined "+n),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(W,{user:n,logout:this.logoutHandler}),l&&r.a.createElement(de.a,null,l),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/register",exact:!0,render:function(){return r.a.createElement(T,{register:e.registerHandler})}}),r.a.createElement(d.b,{path:"/login",exact:!0,render:function(){return a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(I,{login:e.loginHandler})}}),r.a.createElement(me,{exact:!0,path:"/user/:id",isAuth:a,component:N,currentUser:n}),r.a.createElement(me,{exact:!0,path:"/",isAuth:a,component:x,currentUser:n}),r.a.createElement(me,{exact:!0,path:"/trip/add",isAuth:a,component:te}),r.a.createElement(me,{exact:!0,path:"/trip/:id",isAuth:a,component:$}),r.a.createElement(me,{exact:!0,path:"/activities",isAuth:a,component:B}),r.a.createElement(me,{exact:!0,path:"/activity/add",isAuth:a,component:X}),r.a.createElement(me,{exact:!0,path:"/activity/:id",isAuth:a,component:R}),r.a.createElement(me,{exact:!0,path:"/packingLists",isAuth:a,component:ne}),r.a.createElement(me,{exact:!0,path:"/packingList/add",isAuth:a,component:se}),r.a.createElement(me,{exact:!0,path:"/packingList/:id",isAuth:a,component:oe}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(647);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[312,1,2]]]);
//# sourceMappingURL=main.e01e5315.chunk.js.map