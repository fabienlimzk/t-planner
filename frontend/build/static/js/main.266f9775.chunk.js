(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{312:function(e,t,a){e.exports=a(648)},317:function(e,t,a){},538:function(e,t){},540:function(e,t){},554:function(e,t){},556:function(e,t){},584:function(e,t){},586:function(e,t){},587:function(e,t){},593:function(e,t){},595:function(e,t){},613:function(e,t){},615:function(e,t){},627:function(e,t){},630:function(e,t){},648:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(23),i=a.n(r),c=(a(317),a(7)),o=a(8),s=a(10),u=a(9),m=a(14),d=a(16),h=a(12),p=a.n(h),g=a(650),v=a(651),E=a(304),f=a(658),y=a(652),k=a(653),b=a(13),C=a(34),O=a(172),j=a.n(O),S=a(54),_=a.n(S);_.a.enableDebug(),_.a.setApiKey("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U");var A=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},n.getArea=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},n.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},n.onChange=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.onInfoWindowClose=function(e){},n.onPlaceSelected=function(e){var t=e.formatted_address,a=e.address_components,l=n.getCity(a),r=n.getArea(a),i=n.getState(a),c=e.geometry.location.lat(),o=e.geometry.location.lng(),s={address:t,city:l,area:r,state:i,mapPosition:{lat:c,lng:o},markerPosition:{lat:c,lng:o}};n.setState({place:s}),n.props.updatePlace(s)},n.state={place:{city:"",area:"",state:"",address:"",mapPosition:{lat:1.2832,lng:103.8466},markerPosition:{lat:n.props.center.lat,lng:n.props.center.lng}}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;_.a.fromLatLng(this.state.place.markerPosition.lat,this.state.place.markerPosition.lng).then((function(t){t.results[0].formatted_address;var a=t.results[0].address_components;e.getCity(a),e.getArea(a),e.getState(a)}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state!=t||this.props.center.lat!==e.center.lat&&void 0}},{key:"render",value:function(){var e=this;console.log("lat",this.state.place.mapPosition.lat),console.log("lng",this.state.place.mapPosition.lng);var t=Object(C.withScriptjs)(Object(C.withGoogleMap)((function(t){return l.a.createElement(C.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.place.mapPosition.lat,lng:e.state.place.mapPosition.lng}},l.a.createElement(j.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"2px",marginBottom:"100px"},onPlaceSelected:e.onPlaceSelected,types:["(regions)"]}),l.a.createElement(C.Marker,{google:e.props.google,name:"Dolores park",draggable:!1,position:{lat:e.state.place.markerPosition.lat,lng:e.state.place.markerPosition.lng}}),l.a.createElement(C.Marker,null),e.props.activities.map((function(e){return l.a.createElement(C.Marker,{key:e._id,position:{lat:e.place.mapPosition.lat,lng:e.place.mapPosition.lng}})})))})));return void 0!==this.props.center.lat?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U","&libraries=places"),loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:this.props.height}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})})),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:""},"City"),l.a.createElement("input",{type:"text",name:"city",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.city})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"Area"),l.a.createElement("input",{type:"text",name:"area",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.area})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"State"),l.a.createElement("input",{type:"text",name:"state",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.state})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:""},"Address"),l.a.createElement("input",{type:"text",name:"address",className:"form-control",onChange:this.onChange,readOnly:"readOnly",value:this.state.place.address}))):l.a.createElement("div",{style:{height:this.props.height}})}}]),a}(l.a.Component),H=a(302),L=function(e){var t=e.text;return l.a.createElement("div",null,t)},P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{style:{height:"70vh",width:"90%"}},l.a.createElement(H.a,{bootstrapURLKeys:{key:"AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U"},defaultCenter:this.props.center,defaultZoom:this.props.zoom},l.a.createElement(L,{lat:59.955413,lng:30.337844,text:"My Marker"})))}}]),a}(n.Component);P.defaultProps={center:{lat:3.7923,lng:113.4547},zoom:7.4};var x="http://localhost:3333/api",w=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={trips:[]},e.fetchTrips=function(){var t=localStorage.getItem("token");p.a.get("".concat(x,"/trips"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({trips:t.data.trips})})).catch((function(e){console.log(e)}))},e.deleteTrip=function(t){var a=t.target.id;p.a.delete("".concat(x,"/trips/").concat(t.target.id)).then((function(){var t=e.state.trips.filter((function(e){return e._id!==a}));e.setState({trips:t})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchTrips()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",null,"Trips"),l.a.createElement(g.a,{fluid:!0},l.a.createElement(v.a,null,this.state.trips.map((function(t){return t.createdBy._id===e.props.currentUser._id?l.a.createElement(E.a,{key:t._id,md:"3"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement("div",null,l.a.createElement("h4",null,t.title)),l.a.createElement("div",null,l.a.createElement(y.a,{variant:"primary"},t.country)),l.a.createElement("div",null,l.a.createElement(y.a,{variant:"info"},t.start_date)," to",l.a.createElement(y.a,{variant:"info"},t.end_date)),l.a.createElement("div",null,t.description),l.a.createElement("div",null,l.a.createElement(m.b,{to:"/trip/".concat(t._id)},"View"),l.a.createElement(k.a,{onClick:e.deleteTrip,variant:"danger",size:"sm",id:t._id,style:{float:"right"}},"Delete"))))):""}))),l.a.createElement("h4",null,"Places pinned")))}}]),a}(n.Component),T=a(654),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={firstname:"",lastname:"",username:"",email:"",password:""},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.registerHandler=function(){e.props.register(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Register"),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(v.a,null,"First Name:",l.a.createElement(T.a.Control,{name:"firstname",type:"text",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Last Name:",l.a.createElement(T.a.Control,{name:"lastname",type:"text",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Username:",l.a.createElement(T.a.Control,{name:"username",type:"text",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Email Address:",l.a.createElement(T.a.Control,{name:"email",type:"email",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Password:",l.a.createElement(T.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),l.a.createElement(k.a,{variant:"primary",block:!0,onClick:this.registerHandler},"Register"))))}}]),a}(n.Component),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:""},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.loginHandler=function(){e.props.login(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Login"),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(v.a,null,"Email Address:",l.a.createElement(T.a.Control,{name:"email",type:"email",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Password:",l.a.createElement(T.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),l.a.createElement(k.a,{variant:"primary",block:!0,onClick:this.loginHandler}," ","Login"))))}}]),a}(n.Component),M=a(120),N="http://localhost:3333/api",U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={firstname:"",lastname:"",username:"",email:"",status:!1},e.getUserProfile=function(t){p.a.get("".concat(N,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){return e.setState({firstname:t.data.user.firstname,lastname:t.data.user.lastname,username:t.data.user.username,email:t.data.user.email})})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.submitHandler=function(){var t=localStorage.getItem("token");p.a.put("".concat(N,"/auth/user"),{firstname:e.state.firstname,lastname:e.state.lastname,username:e.state.username,email:e.state.email},{headers:{"x-auth-token":t}}).then((function(a){console.log("done"),e.getUserProfile(t),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e.componentDidMount=function(){var t=localStorage.getItem("token");null!=t&&(Object(M.decode)(t)?e.getUserProfile(t):localStorage.removeItem("token"))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.username,r=e.email;return console.log(this.state),this.state.status?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement("h1",null,"Profile"),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(v.a,null,"First Name:",l.a.createElement(T.a.Control,{name:"firstname",type:"text",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Last Name:",l.a.createElement(T.a.Control,{name:"lastname",type:"text",value:a,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Username:",l.a.createElement(T.a.Control,{name:"username",type:"text",value:n,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Email Address:",l.a.createElement(T.a.Control,{name:"email",type:"email",value:r,onChange:this.changeHandler})),l.a.createElement(k.a,{variant:"primary",block:!0,onClick:this.submitHandler},"Update"))))}}]),a}(n.Component),Q=a(655),z=a(656);var F=function(e){var t=e.user,a=e.logout;return l.a.createElement(Q.a,{bg:"dark",expand:"lg"},l.a.createElement(Q.a.Brand,{href:"/"},l.a.createElement("img",{alt:"",src:"/logo.png",width:"45",height:"35",className:"d-inline-block align-top"}),"T-Planner"),l.a.createElement(Q.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(Q.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(z.a,{className:"mr-auto"},l.a.createElement(m.b,{className:"nav-link",to:"/"},"Trips"),l.a.createElement(m.b,{className:"nav-link",to:"/trip/add"},"Add Trip"),l.a.createElement(m.b,{className:"nav-link",to:"/packingLists"},"Packing List"),l.a.createElement(m.b,{className:"nav-link",to:"/packingList/add"},"Add Packing List")),l.a.createElement(z.a,null,t?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/user/".concat(t._id),className:"nav-link"},t.firstname," ",t.lastname),l.a.createElement(m.b,{to:"/logout",onClick:a,className:"nav-link"},"Logout")):l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login"),l.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))},B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={activities:[]},e.deleteActivity=function(t){var a=t.target.id;p.a.delete("".concat("http://localhost:3333/api","/activities/").concat(a)).then((function(){var t=e.state.activities.filter((function(e){return e._id!==a}));e.setState({activities:t})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({activities:this.props.activities})}},{key:"componentDidUpdate",value:function(e){e.activities!==this.props.activities&&this.setState({activities:this.props.activities})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",null,"Activities"),l.a.createElement(g.a,{fluid:!0},l.a.createElement(v.a,null,this.state.activities.map((function(t){return l.a.createElement(E.a,{key:t._id,md:"3"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement("div",null,l.a.createElement(f.a.Img,{variant:"top",src:t.image_url})),l.a.createElement("div",null,t.title),l.a.createElement("div",null,t.description),l.a.createElement("div",null,l.a.createElement(m.b,{to:"/activity/".concat(t._id)},"View"),l.a.createElement(k.a,{onClick:e.deleteActivity,variant:"danger",id:t._id,size:"sm",style:{float:"right"}},"Delete")))))})))))}}]),a}(n.Component),Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",start_date:"",end_date:"",duration:"",address:"",description:"",image_url:""},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.componentDidMount=function(){e.setState(e.props.activity)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.start_date,n=e.end_date,r=e.duration,i=e.address,c=e.description,o=e.image_url;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h4",null,"Edit Activity"),l.a.createElement("div",null,l.a.createElement(v.a,null,"Title",l.a.createElement(T.a.Control,{name:"title",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date",l.a.createElement(T.a.Control,{name:"start_date",value:a.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date",l.a.createElement(T.a.Control,{name:"end_date",value:n.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Duration",l.a.createElement(T.a.Control,{name:"duration",value:r,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Address",l.a.createElement(T.a.Control,{name:"address",value:i,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description",l.a.createElement(T.a.Control,{name:"description",value:c,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Image",l.a.createElement(T.a.Control,{name:"image_url",value:o,onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit"))))}}]),a}(n.Component);_.a.enableDebug(),_.a.setApiKey("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U");var G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),_.a.fromLatLng(this.props.activity.place.mapPosition.lat,this.props.activity.place.mapPosition.lng).then((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this,t=Object(C.withScriptjs)(Object(C.withGoogleMap)((function(t){return l.a.createElement(C.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.props.activity.place.mapPosition.lat,lng:e.props.activity.place.mapPosition.lng}},l.a.createElement(C.Marker,{google:e.props.google,name:"Dolores park",draggable:!1,position:{lat:e.props.activity.place.mapPosition.lat,lng:e.props.activity.place.mapPosition.lng}}),l.a.createElement(C.Marker,null))})));return l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAoQeHYfXxeqO3VnIE8cYtQQuG_TnbLl8U","&libraries=places"),loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:this.props.height}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})})),l.a.createElement("br",null))}}]),a}(l.a.Component),V="http://localhost:3333/api",R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={activity:null,edit:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editActivity=function(t,a){p.a.put("".concat(V,"/activities/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getActivity()})).catch((function(e){console.log(e)}))},e.fetchActivities=function(){var t=localStorage.getItem("token");p.a.get("".concat(V,"/activities"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({activities:t.data.activities})})).catch((function(e){console.log(e)}))},e.deleteActivity=function(t){console.log(e.props)},e.getActivity=function(){p.a.get("".concat(V,"/activities/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({activity:t.data.activity})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getActivity()}},{key:"render",value:function(){var e=this.state,t=e.activity,a=e.edit;return l.a.createElement("div",null,l.a.createElement(g.a,null,t?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,t.title)),l.a.createElement("div",null,"Start: ",t.start_date?t.start_date.split("T")[0]:""),l.a.createElement("div",null,"End: ",t.end_date?t.end_date.split("T")[0]:""),l.a.createElement("div",null,"Duration: ",t.duration),l.a.createElement("div",null,"Address: ",t.address),l.a.createElement("div",null,"Description: ",t.description),l.a.createElement("div",null,l.a.createElement("img",{src:t.image_url,alt:""})),l.a.createElement(k.a,{onClick:this.showEdit},"Edit Activity"),a&&l.a.createElement(Y,{activity:t,editActivity:this.editActivity}),l.a.createElement(G,{google:this.props.google,height:"650px",zoom:2,activity:t})):"Loading..."))}}]),a}(n.Component),q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",start_date:"",end_date:"",duration:"",place:{city:"",area:"",state:"",address:"",mapPosition:{lat:1.2832,lng:103.8466},description:"",image_url:"",trip_id:e.props.trip_id}},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.updatePlace=function(t){e.setState({place:t,trip_id:e.props.trip_id})},e.submitHandler=function(){p.a.post("".concat("http://localhost:3333/api","/activities"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.props.addActivity(t.data.savedActivity)})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.start_date,n=e.end_date,r=e.duration,i=e.description,c=e.image_url;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Add Activity"),l.a.createElement(v.a,null,"Title",l.a.createElement(T.a.Control,{name:"title",value:t,placeholder:"e.g. Visit local market",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date",l.a.createElement(T.a.Control,{name:"start_date",value:a,type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date",l.a.createElement(T.a.Control,{name:"end_date",value:n,type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Duration",l.a.createElement(T.a.Control,{name:"duration",value:r,placeholder:"1hr",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description",l.a.createElement(T.a.Control,{name:"description",value:i,placeholder:"Use the backdoor",onChange:this.changeHandler})),l.a.createElement(v.a,null,"Image",l.a.createElement(T.a.Control,{name:"image_url",value:c,placeholder:"url",onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit"),l.a.createElement(A,{google:this.props.google,center:{lat:15.7076,lng:104.1920275},height:"650px",zoom:6.26,updatePlace:this.updatePlace,activities:this.props.activities}))))}}]),a}(n.Component),X=a(72),J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",description:"",country:"",start_date:"",end_date:"",status:!1},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.submitHandler=function(){e.props.editTrip(e.state,e.props.trip._id)},e.componentDidMount=function(){e.setState(e.props.trip)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.country,r=e.start_date,i=e.end_date;return l.a.createElement("div",null,l.a.createElement("h1",null,"Edit Trip"),l.a.createElement("div",null,l.a.createElement(v.a,null,"Title of Trip:",l.a.createElement(T.a.Control,{name:"title",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description:",l.a.createElement(T.a.Control,{name:"description",value:a,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Country:",l.a.createElement(T.a.Control,{name:"country",value:n,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date:",l.a.createElement(T.a.Control,{name:"start_date",value:r.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date:",l.a.createElement(T.a.Control,{name:"end_date",value:i.split("T")[0],type:"date",onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),K="http://localhost:3333/api",W=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={trip:null,trip_id:"",activity:{title:"",start_date:"",end_date:"",duration:"",place:{city:"",area:"",state:"",address:"",mapPosition:{lat:"",lng:""}},description:"",image_url:""},activities:[],edit:!1,add:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.showAdd=function(){e.setState((function(e){return{add:!e.add}}))},e.editTrip=function(t,a){p.a.put("".concat(K,"/trips/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getTrip()})).catch((function(e){console.log(e)}))},e.fetchTrips=function(){var t=localStorage.getTrip("token");p.a.get("".concat(K,"/trips"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({trips:t.data.trips})})).catch((function(e){console.log(e)}))},e.getTrip=function(){p.a.get("".concat(K,"/trips/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log(t.data),e.setState({trip:t.data.trip,activities:t.data.trip.activities,trip_id:t.data.trip._id})})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.submitHandler=function(){console.log(e.state),p.a.post("".concat(K,"/activities"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(e){console.log("done")})).catch((function(e){console.log(e)}))},e.addActivity=function(t){e.setState({activities:[].concat(Object(X.a)(e.state.activities),[t])}),console.log("activities added to trip.state.activities "+JSON.stringify(t))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getTrip()}},{key:"render",value:function(){var e=this.state,t=e.trip,a=e.edit,n=e.add,r=e.activities;return l.a.createElement("div",null,l.a.createElement(g.a,null,t?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,t.title)),l.a.createElement("div",null,"Description: ",t.description),l.a.createElement("div",null,"Country: ",t.country),l.a.createElement("div",null,"Start Date: ",t.start_date),l.a.createElement("div",null,"End Date: ",t.end_date),l.a.createElement("div",null,"Created By: ",t.createdBy.username)),l.a.createElement(k.a,{onClick:this.showEdit},"Edit Trip"),l.a.createElement("br",null),a&&l.a.createElement(J,{trip:t,editTrip:this.editTrip}),l.a.createElement("br",null),l.a.createElement(B,{activities:r}),l.a.createElement("br",null),l.a.createElement(k.a,{onClick:this.showAdd},"Add More Activity"),l.a.createElement("br",null),n&&l.a.createElement(q,{addActivity:this.addActivity,activities:this.state.activities,activity:this.state.trip.activities,trip_id:this.state.trip_id})):"Loading..."))}}]),a}(n.Component),Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",description:"",country:"",start_date:"",end_date:"",status:!1},e.changeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.submitHandler=function(){p.a.post("".concat("http://localhost:3333/api","/trips"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.setState({status:!0})})).catch((function(e){console.log(e.response.data)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.country,r=e.start_date,i=e.end_date;return this.state.status?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Add Trip"),l.a.createElement("div",null,l.a.createElement(v.a,null,"Title of Trip:",l.a.createElement(T.a.Control,{name:"title",value:t,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Description:",l.a.createElement(T.a.Control,{name:"description",value:a,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Country:",l.a.createElement(T.a.Control,{name:"country",value:n,onChange:this.changeHandler})),l.a.createElement(v.a,null,"Start date:",l.a.createElement(T.a.Control,{name:"start_date",value:r,type:"date",onChange:this.changeHandler})),l.a.createElement(v.a,null,"End date:",l.a.createElement(T.a.Control,{name:"end_date",value:i,type:"date",onChange:this.changeHandler})),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit"))))}}]),a}(n.Component),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={packingLists:[]},e.fetchPackingLists=function(){var t=localStorage.getItem("token");p.a.get("".concat("http://localhost:3333/api","/packingLists"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({packingLists:t.data.packingLists})})).catch((function(e){console.log(e)}))},e.deletePackingList=function(t){p.a.delete("".concat("http://localhost:3333/api","/packingLists/").concat(t.target.id)).then((function(t){e.fetchPackingLists()}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchPackingLists()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",null,"Packing List"),l.a.createElement(g.a,{fluid:!0},l.a.createElement(v.a,null,this.state.packingLists.map((function(t,a){return l.a.createElement(E.a,{key:t._id,md:"3"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement("div",null,t.title,l.a.createElement("br",null)),l.a.createElement("div",null,l.a.createElement(m.b,{to:"/packingList/".concat(t._id)},"View"),l.a.createElement(k.a,{onClick:e.deletePackingList,variant:"danger",id:t._id,size:"sm",style:{float:"right"}},"Delete")))))})))))}}]),a}(n.Component),ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",items:[]},e.titleChangeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.itemChangeHandler=function(t,a){e.state.items[a]=t.target.value,e.setState({items:e.state.items})},e.removeHandler=function(t){e.state.items.splice(t,1),console.log(e.state.items,"----"),e.setState({items:e.state.items})},e.submitHandler=function(){e.props.editPackingList(e.state,e.props.packingList._id)},e.addItem=function(){e.setState({items:[].concat(Object(X.a)(e.state.items),[""])})},e.componentDidMount=function(){e.setState(e.props.packingList)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.items;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Edit Item"),l.a.createElement(v.a,null,"Title:",l.a.createElement(T.a.Control,{name:"title",value:a,placeholder:"Summer",onChange:this.titleChangeHandler})),l.a.createElement("div",null,"Items:",n.map((function(t,a){return l.a.createElement(v.a,{key:a},l.a.createElement(T.a.Control,{name:"items",value:t,placeholder:"FlipFlops",onChange:function(t){return e.itemChangeHandler(t,a)}}),l.a.createElement(k.a,{variant:"danger",onClick:function(){return e.removeHandler(a)}},"Remove"))}))),l.a.createElement(k.a,{onClick:function(t){return e.addItem(t)}},"Add more item"),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),te=a(659),ae="http://localhost:3333/api",ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={packingList:null,edit:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editPackingList=function(t,a){p.a.put("".concat(ae,"/packingLists/").concat(a),t,{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.getPackingList()})).catch((function(e){console.log(e)}))},e.fetchPackingLists=function(){var t=localStorage.getItem("token");p.a.get("".concat(ae,"/packingLists"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({packingLists:t.data.packingLists})})).catch((function(e){console.log(e)}))},e.deletePackingList=function(e){},e.getPackingList=function(){p.a.get("".concat(ae,"/packingLists/").concat(e.props.match.params.id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){e.setState({packingList:t.data.packingList})})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getPackingList()}},{key:"render",value:function(){var e=this.state,t=e.packingList,a=e.edit;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Packing List"),t?l.a.createElement("div",null,l.a.createElement("h3",null,t.title),t.items.map((function(e,t){return l.a.createElement("div",null,l.a.createElement(te.a,null,l.a.createElement(te.a.Item,{as:"li",key:t},e)))})),l.a.createElement(k.a,{onClick:this.showEdit},"Edit Packing List"),a&&l.a.createElement(ee,{packingList:t,editPackingList:this.editPackingList})):"Loading..."))}}]),a}(n.Component),le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",items:[],status:!1},e.titleChangeHandler=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.itemChangeHandler=function(t,a){e.state.items[a]=t.target.value,e.setState({items:e.state.items})},e.removeHandler=function(t){e.state.items.splice(t,1),console.log(e.state.items,"----"),e.setState({items:e.state.items})},e.submitHandler=function(t){p.a.post("".concat("http://localhost:3333/api","/packingLists"),e.state,{headers:{"x-auth-token":localStorage.token}}).then((function(t){console.log("done"),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e.addItem=function(){e.setState({items:[].concat(Object(X.a)(e.state.items),[""])})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.items;return this.state.status?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement("h1",null,"Add Item"),l.a.createElement(v.a,null,"Title:",l.a.createElement(T.a.Control,{name:"title",value:a,placeholder:"Summer",onChange:this.titleChangeHandler})),l.a.createElement("div",null,"Items:",n.map((function(t,a){return l.a.createElement(v.a,{key:a},l.a.createElement(T.a.Control,{name:"items",value:t,placeholder:"FlipFlops",onChange:function(t){return e.itemChangeHandler(t,a)}}),l.a.createElement(k.a,{variant:"danger",onClick:function(){return e.removeHandler(a)}},"Remove"))}))),l.a.createElement(k.a,{onClick:function(t){return e.addItem(t)}},"Add more item"),l.a.createElement(k.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),re=a(311);var ie=function(e){var t=e.component,a=e.isAuth,n=Object(re.a)(e,["component","isAuth"]);return l.a.createElement(d.b,Object.assign({},n,{render:function(e){return a?l.a.createElement(t,Object.assign({},e,n)):l.a.createElement(d.a,{to:"/login"})}}))},ce=a(657),oe="http://localhost:3333/api",se=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={trips:[],errorMessage:null,isAuth:!1,user:null},e.getUserProfile=function(t){p.a.get("".concat(oe,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){e.setState({isAuth:!0,user:t.data.user})})).catch((function(e){}))},e.loginHandler=function(t){p.a.post("".concat(oe,"/auth/login"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token),e.setState({isAuth:!0})})).catch((function(t){console.log(t),e.setState({isAuth:!1,errorMessage:t.response.data.message})}))},e.registerHandler=function(t){p.a.post("".concat(oe,"/auth/register"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1})}))},e.logoutHandler=function(t){t.preventDefault(),console.log("User logged out"),e.setState({items:[],errorMessage:null,isAuth:!1,user:null}),localStorage.removeItem("token")},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!=e&&(Object(M.decode)(e)?this.getUserProfile(e):localStorage.removeItem("token"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAuth,n=t.user,r=t.errorMessage;return console.log("this belongs to the user logined "+n),l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,null,l.a.createElement(F,{user:n,logout:this.logoutHandler}),r&&l.a.createElement(ce.a,null,r),l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/register",exact:!0,render:function(){return l.a.createElement(I,{register:e.registerHandler})}}),l.a.createElement(d.b,{path:"/login",exact:!0,render:function(){return a?l.a.createElement(d.a,{to:"/"}):l.a.createElement(D,{login:e.loginHandler})}}),l.a.createElement(ie,{exact:!0,path:"/user/:id",isAuth:a,component:U,currentUser:n}),l.a.createElement(ie,{exact:!0,path:"/",isAuth:a,component:w,currentUser:n}),l.a.createElement(ie,{exact:!0,path:"/trip/add",isAuth:a,component:Z}),l.a.createElement(ie,{exact:!0,path:"/trip/:id",isAuth:a,component:W}),l.a.createElement(ie,{exact:!0,path:"/activities",isAuth:a,component:B}),l.a.createElement(ie,{exact:!0,path:"/activity/add",isAuth:a,component:q}),l.a.createElement(ie,{exact:!0,path:"/activity/:id",isAuth:a,component:R}),l.a.createElement(ie,{exact:!0,path:"/packingLists",isAuth:a,component:$}),l.a.createElement(ie,{exact:!0,path:"/packingList/add",isAuth:a,component:le}),l.a.createElement(ie,{exact:!0,path:"/packingList/:id",isAuth:a,component:ne}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(647);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[312,1,2]]]);
//# sourceMappingURL=main.266f9775.chunk.js.map